package com.univo.display.controller;import java.io.UnsupportedEncodingException;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;import javax.annotation.Resource;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.JSONArray;import com.alibaba.fastjson.JSONObject;import com.univo.display.service.BusinessService;import com.univo.display.service.DeviceInfoService;import com.univo.display.service.MainService;import com.univo.display.service.RainbowService;import com.univo.display.util.Util;@Controllerpublic class MainController {	private static final Logger logger = LoggerFactory.getLogger(MainController.class);	@Resource	private MainService mainServiceImpl;	@Resource	private DeviceInfoService deviceInfoServiceImpl;	@Resource	private RainbowService rainbowServiceImpl;	@Resource	private BusinessService businessServiceImpl;	@RequestMapping("/")	public String queryCount() {		return "main";	}	@ResponseBody	@RequestMapping(value = "getDeviceInfo", produces = "application/json; charset=utf-8")	public String getDeviceInfo() {		// 各机型分别的激活设备数		List<Map<String, Object>> list1 = deviceInfoServiceImpl.deviceActiveTypeCount();		// 各机型分别的正常运行设备总数		List<Map<String, Object>> list2 = deviceInfoServiceImpl.deviceNormalTypeCount();		// 各机型分别的待检修设备总数		List<Map<String, Object>> list3 = deviceInfoServiceImpl.deviceCheckTypeCount();		logger.info(list1.toString());		logger.info(list2.toString());		logger.info(list3.toString());		JSONObject object1 = new JSONObject();		object1.put("value", 10);		object1.put("name", "正常运行");		JSONObject object2 = new JSONObject();		object2.put("value", 3);		object2.put("name", "待检修");		JSONArray array = new JSONArray();		array.add(object1);		array.add(object2);		JSONObject resp = new JSONObject();		resp.put("data", array);		logger.info(resp.toJSONString());		return resp.toJSONString();	}	@ResponseBody	@RequestMapping(value = "getRainbowInfo", produces = "application/json; charset=utf-8")	public String getRainbowInfo() {		List<Map<String, Object>> list = null;		list = rainbowServiceImpl.users7DaysIncrease();		logger.info(list.toString());		list = rainbowServiceImpl.user7DaysActive();		logger.info(list.toString());		return "{\"data\":[{\"name\":\"正常运行\",\"value\":10},{\"name\":\"待检修\",\"value\":3}]}";	}	@ResponseBody	@RequestMapping(value = "getBusinessInfo", produces = "application/json; charset=utf-8")	public String getBusinessInfo() {		return "{\"data\":[{\"name\":\"正常运行\",\"value\":10},{\"name\":\"待检修\",\"value\":3}]}";	}	@ResponseBody	@RequestMapping(value = "getTicketInfo", produces = "application/json; charset=utf-8")	public String getTicketInfo() {		return "{\"data\":[{\"name\":\"正常运行\",\"value\":10},{\"name\":\"待检修\",\"value\":3}]}";	}	@ResponseBody	@RequestMapping("mobileBusiness")	public String mobileBusiness() {		List<Map<String, Object>> list = null;		list = mainServiceImpl.businessApply();		logger.info(list.toString());		list = mainServiceImpl.businessCount();		logger.info(list.toString());		list = mainServiceImpl.businessWeek();		logger.info(list.toString());		list = mainServiceImpl.businessWeekCount();		logger.info(list.toString());		list = mainServiceImpl.businessMonth();		logger.info(list.toString());		list = mainServiceImpl.businessMonthCount();		logger.info(list.toString());		list = mainServiceImpl.businessWeekCircle();		logger.info(list.toString());		list = mainServiceImpl.ordersSale();		logger.info(list.toString());		list = mainServiceImpl.ordersSaleTotal();		logger.info(list.toString());		list = mainServiceImpl.lotteryLaunch();		logger.info(list.toString());		list = mainServiceImpl.ordersWeek();		logger.info(list.toString());		list = mainServiceImpl.ordersWeekTotal();		logger.info(list.toString());		list = mainServiceImpl.lotteryLaunchWeek();		logger.info(list.toString());		list = mainServiceImpl.ordersMonth();		logger.info(list.toString());		list = mainServiceImpl.ordersMonthTotal();		logger.info(list.toString());		list = mainServiceImpl.lotteryLaunchMonth();		logger.info(list.toString());		list = mainServiceImpl.ordersSaleWeekIncrease();		logger.info(list.toString());		list = mainServiceImpl.usersWeekIncrease();		logger.info(list.toString());		return "";	}}