<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="format-detection" content="telephone=no">

<title>GIS信息展示</title>

<link rel="stylesheet" href="css/gis.css" />
<link rel="stylesheet" href="dist/layui/css/layui.css" />
</head>
<body>
	<div class="top">
		<span class="title">展板GIS信息</span> 
		<img src="image/filter.png" id="filterImg" />
	</div>

	<!-- 过滤条件部分，放在body最外层-->
	<form id="filterForm" class="layui-form" style="padding: 20px; display: none;">
	
		<!-- 渠道 -->
		<div class="layui-form-item">
			<div class="layui-input-block" style="margin-left: 20px; margin-bottom: 30px;">
				<input id="qudaoCheck" type="checkbox" lay-filter="showType" name="showType" value="qudao" title="渠道">
			</div>
		</div>
		
		<div class="layui-form-item m-l-20">
			<label class="layui-form-label">机器类型</label>
			<div class="layui-input-inline select" id="qudao_type"></div>
			<button type="button" id="qudao_type_all" class="layui-btn layui-btn-sm">全选</button>
			<button type="button" id="qudao_type_reset" class="layui-btn layui-btn-sm layui-btn-danger">重置</button>
		</div>
		
		<div class="hline"></div>

		<!-- 移动 -->
		<div class="layui-form-item">
			<div class="layui-input-block" style="margin-left: 20px; margin-bottom: 30px;">
				<input id="yidongCheck" type="checkbox" lay-filter="showType" name="showType" value="yidong" title="移动">
			</div>
		</div>

		<div class="layui-form-item m-l-20">
			<label class="layui-form-label">类型</label>
			<div class="layui-input-inline select" id="yidong_type"></div>
			<button type="button" id="yidong_type_all" class="layui-btn layui-btn-sm">全选</button>
			<button type="button" id="yidong_type_reset" class="layui-btn layui-btn-sm layui-btn-danger">重置</button>
		</div>

		<div class="layui-form-item m-l-20">
			<label class="layui-form-label">区域</label>
			<div class="layui-input-inline select" id="yidong_area"></div>
			<button type="button" id="yidong_area_all" class="layui-btn layui-btn-sm">全选</button>
			<button type="button" id="yidong_area_reset" class="layui-btn layui-btn-sm layui-btn-danger">重置</button>
		</div>

		<div class="hline"></div>

		<!-- 体彩 -->
		<div class="layui-form-item" style="margin-top: 20px;">
			<div class="layui-input-block" style="margin-left: 20px; margin-bottom: 30px;">
				<input id="ticaiCheck" type="checkbox" lay-filter="showType" name="showType" value="ticai" title="体彩">
			</div>
		</div>

		<div class="layui-form-item m-l-20">
			<label class="layui-form-label">区域</label>
			<div class="layui-input-inline select" id="ticai_area"></div>
			<button type="button" id="ticai_area_all" class="layui-btn layui-btn-sm">全选</button>
			<button type="button" id="ticai_area_reset" class="layui-btn layui-btn-sm layui-btn-danger">重置</button>
		</div>

		<div class="hline"></div>

		<!-- 福彩2018-->
		<div class="layui-form-item" style="margin-top: 20px;">
			<div class="layui-input-block" style="margin-left: 20px; margin-bottom: 30px;">
				<input id="fucai8Check" type="checkbox" lay-filter="showType" name="showType" value="fucai8" title="福彩2018">
			</div>
		</div>

		<div class="layui-form-item m-l-20">
			<label class="layui-form-label">店铺类型</label>
			<div class="layui-input-inline select" id="fucai8_shopType"></div>
			<button type="button" id="fucai8_shopType_all" class="layui-btn layui-btn-sm">全选</button>
			<button type="button" id="fucai8_shopType_reset" class="layui-btn layui-btn-sm layui-btn-danger">重置</button>
		</div>

		<div class="layui-form-item m-l-20">
			<label class="layui-form-label">单双机</label>
			<div class="layui-input-inline select" id="fucai8_danji"></div>
			<button type="button" id="fucai8_danji_all" class="layui-btn layui-btn-sm">全选</button>
			<button type="button" id="fucai8_danji_reset" class="layui-btn layui-btn-sm layui-btn-danger">重置</button>
		</div>

		<div class="layui-form-item m-l-20">
			<label class="layui-form-label">渠道网点</label>
			<div class="layui-input-inline select" id="fucai8_wangdian"></div>
			<button type="button" id="fucai8_wangdian_all" class="layui-btn layui-btn-sm">全选</button>
			<button type="button" id="fucai8_wangdian_reset" class="layui-btn layui-btn-sm layui-btn-danger">重置</button>
		</div>

		<div class="hline"></div>

		<!-- 福彩2019 -->
		<div class="layui-form-item" style="margin-top: 20px;">
			<div class="layui-input-block" style="margin-left: 20px; margin-bottom: 30px;">
				<input id="fucai9Check" type="checkbox" lay-filter="showType" name="showType" value="fucai9" title="福彩2019">
			</div>
		</div>

		<div class="layui-form-item m-l-20">
			<label class="layui-form-label">区域</label>
			<div class="layui-input-inline select" id="fucai9_area"></div>
			<button type="button" id="fucai9_area_all" class="layui-btn layui-btn-sm">全选</button>
			<button type="button" id="fucai9_area_reset" class="layui-btn layui-btn-sm layui-btn-danger">重置</button>
		</div>

		<div class="layui-form-item m-l-20">
			<label class="layui-form-label">网点类型</label>
			<div class="layui-input-inline select" id="fucai9_shopType"></div>
			<button type="button" id="fucai9_shopType_all" class="layui-btn layui-btn-sm">全选</button>
			<button type="button" id="fucai9_shopType_reset" class="layui-btn layui-btn-sm layui-btn-danger">重置</button>
		</div>

		<div class="hline"></div>

		<div class="layui-form-item" style="text-align: center; margin-top: 30px;">
			<div class="layui-input-block">
				<button type="button" id="okBtn" class="layui-btn" style="padding-left: 50px; padding-right: 50px;">确定</button>
				<button type="button" id="cancelBtn" class="layui-btn layui-btn-primary" style="margin-left: 60px; padding-left: 50px; padding-right: 50px;">取消</button>
			</div>
		</div>

	</form>

	<div id="map"></div>

	<div class="footer">
		<span class="m-l-40"><img src="image/icon-red.png" /> 移动</span> <span class="m-l-40"><img src="image/icon-blue.png" /> 体彩</span> <span class="m-l-40"><img src="image/icon-yellow.png" /> 福彩2018</span> <span class="m-l-40"><img src="image/icon-green.png" /> 福彩2019</span>
	</div>

	<script src="dist/layui/layui.js"></script>
	<script src="js/data.js"></script>
	<script src="js/map.js"></script>
	<script src="js/index.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script src="https://cache.amap.com/lbs/static/es5.min.js"></script>
	<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=620b4f4bf7c7b78872ac2cc4070ef1f7&&plugin=AMap.Scale,AMap.OverView,AMap.ToolBar"></script>
	<script type="text/javascript" src="https://a.amap.com/jsapi_demos/static/demo-center/data/mock_position.js"></script>

	<script type="text/javascript">
			var layer = null;
			var markers = [];
			
			var map = new AMap.Map('map', {
				zoom: 12,
				showLabel: true,
				expandZoomRange: true,
				center: [116.397477, 39.908692],
				viewMode: '3D',
				pitch: 60,
				// https://lbs.amap.com/api/javascript-api/example/personalized-map/set-theme-style
				mapStyle: 'amap://styles/darkblue',
			});

			// 同时引入工具条插件，比例尺插件和鹰眼插件
			AMap.plugin([
				'AMap.ToolBar',
				'AMap.Scale',
				'AMap.OverView',
				'AMap.MapType',
				'AMap.Geolocation',
			], function() {
				// 在图面添加工具条控件，工具条控件集成了缩放、平移、定位等功能按钮在内的组合控件
				map.addControl(new AMap.ToolBar());
				// 在图面添加比例尺控件，展示地图在当前层级和纬度下的比例尺
				map.addControl(new AMap.Scale());
				// 在图面添加鹰眼控件，在地图右下角显示地图的缩略图
				map.addControl(new AMap.OverView({
					isOpen: true
				}));
				// 在图面添加类别切换控件，实现默认图层与卫星图、实施交通图层之间切换的控制
				map.addControl(new AMap.MapType());
				// 在图面添加定位控件，用来获取和展示用户主机所在的经纬度位置
				map.addControl(new AMap.Geolocation());
			});

			map.on('complete', function() {
				// 创建 AMap.LabelsLayer 图层
				layer = new AMap.LabelsLayer({
					zooms: [3, 20],
					zIndex: 1000,
					// 关闭标注避让，默认为开启，v1.4.15 新增属性
					animation: true,
					// 关闭标注淡入动画，默认为开启，v1.4.15 新增属性
					collision: true
				});
				map.setDefaultCursor("crosshair");

				map.add(layer);
				
				refreshData();

			});
			
			var infoWindow = new AMap.InfoWindow({
				offset: new AMap.Pixel(0, -30),
				autoMove: true,
				isCustom: false,
				closeWhenClickMap:false,
				size: [200, 0]
			});

			function markerClick(e) {
				infoWindow.setContent(e.target.content);
				infoWindow.open(map, e.target.getPosition());
				
				resetCount();
			}
		</script>

	<script type="text/javascript">
			var filterLayer = null;
			var closeIndex = 0;
			$(function($) {
				$("#filterImg").on('click', function() {
					layui.use('layer', function() {
						if (infoWindow.getIsOpen()) {
							infoWindow.close()
						}
						
						filterLayer = layui.layer;
						
						filterLayer.open({
							type: 1,
							area: ['80%', '85%'],
							title: "请设置过滤条件",
							content: $('#filterForm')
						});
						closeIndex = filterLayer.index;
					});
				});
			});
		</script>

	<script type="text/javascript">
			var qudao_type, yidong_type, yidong_area, ticai_area, fucai8_shopType, fucai8_danji, fucai8_wangdian, fucai9_area,
				fucai9_shopType;

			layui.config({
				base: './'
			}).extend({
				selectN: 'dist/layui_extends/selectN',
				selectM: 'dist/layui_extends/selectM',
			}).use(['layer', 'form', 'jquery', 'selectN', 'selectM'], function() {
				$ = layui.jquery;
				var form = layui.form,
					selectN = layui.selectN,
					selectM = layui.selectM;

				qudao_type = selectM({
					elem: '#qudao_type',
					data: qudao_typeData,
					tips: '请选择机器类型',
					max: qudao_typeData.length,
					verify: 'required'
				})
				
				yidong_type = selectM({
					elem: '#yidong_type',
					data: yidong_typeData,
					tips: '请选择类型',
					max: yidong_typeData.length,
					verify: 'required'
				})

				yidong_area = selectM({
					elem: '#yidong_area',
					data: yidong_areaData,
					tips: '请选择区域',
					max: yidong_areaData.length,
					verify: 'required'
				})

				ticai_area = selectM({
					elem: '#ticai_area',
					data: ticai_areaData,
					tips: '请选择区域',
					max: ticai_areaData.length,
					verify: 'required'
				})

				fucai8_shopType = selectM({
					elem: '#fucai8_shopType',
					data: fucai8_shopTypeData,
					tips: '请选择店铺类型',
					max: fucai8_shopTypeData.length,
					verify: 'required'
				})

				fucai8_danji = selectM({
					elem: '#fucai8_danji',
					data: fucai8_danjiData,
					tips: '请选择单双机类型',
					max: fucai8_danjiData.length,
					verify: 'required'
				})

				fucai8_wangdian = selectM({
					elem: '#fucai8_wangdian',
					data: fucai8_wangdianData,
					tips: '请选择渠道网点',
					max: fucai8_wangdianData.length,
					verify: 'required'
				})

				fucai9_area = selectM({
					elem: '#fucai9_area',
					data: fucai9_areaData,
					tips: '请选择区域',
					max: fucai9_areaData.length,
					verify: 'required'
				})

				fucai9_shopType = selectM({
					elem: '#fucai9_shopType',
					data: fucai9_shopTypeData,
					tips: '请选择网点类型',
					max: fucai9_shopTypeData.length,
					verify: 'required'
				})
			});
		</script>

	<script>
			$('#qudao_type').click(function () {
				toggelCheck('qudao')
			})
			
			$('#qudao_type_all').click(function(){
				qudao_type.set(getQudaoTypeKeyArr());
				toggelCheck('qudao')
			})
			
			$('#qudao_type_reset').click(function(){
				qudao_type.set();
				toggelCheck('qudao')
			})
	
			$('#yidong_type').click(function () {
				toggelCheck('yidong')
			})
			
			$('#yidong_area').click(function () {
				toggelCheck('yidong')
			})
	
			$('#yidong_area_all').click(function(){
				yidong_area.set(getYidongAreaKeyArr());
				toggelCheck('yidong')
			})
			
			$('#yidong_area_reset').click(function(){
				yidong_area.set();
				toggelCheck('yidong')
			})
			
			$('#yidong_type_all').click(function(){
				yidong_type.set(getYidongTypeKeyArr());
				toggelCheck('yidong')
			})
			
			$('#yidong_type_reset').click(function(){
				yidong_type.set();
				toggelCheck('yidong')
			})
			
			$('#ticai_area').click(function(){
				toggelCheck('ticai')
			})
			
			$('#ticai_area_all').click(function(){
				ticai_area.set(getTicaiAreaKeyArr());
				toggelCheck('ticai')
			})
			
			$('#ticai_area_reset').click(function(){
				ticai_area.set();
				toggelCheck('ticai')
			})
			
			$('#fucai8_shopType').click(function(){
				toggelCheck('fucai8')
			})
			
			$('#fucai8_danji').click(function(){
				toggelCheck('fucai8')
			})
			
			$('#fucai8_wangdian').click(function(){
				toggelCheck('fucai8')
			})
			
			$('#fucai8_shopType_all').click(function(){
				fucai8_shopType.set(getFucai8ShopTypeKeyArr());
				toggelCheck('fucai8')
			})
			
			$('#fucai8_shopType_reset').click(function(){
				fucai8_shopType.set();
				toggelCheck('fucai8')
			})
			
			$('#fucai8_danji_all').click(function(){
				fucai8_danji.set(getFucai8DanjiKeyArr());
				toggelCheck('fucai8')
			})
			
			$('#fucai8_danji_reset').click(function(){
				fucai8_danji.set();
				toggelCheck('fucai8')
			})
			
			$('#fucai8_wangdian_all').click(function(){
				fucai8_wangdian.set(getFucai8WangdianKeyArr());
				toggelCheck('fucai8')
			})
			
			$('#fucai8_wangdian_reset').click(function(){
				fucai8_wangdian.set();
				toggelCheck('fucai8')
			})
			
			$('#fucai9_area').click(function(){
				toggelCheck('fucai9')
			})
			
			$('#fucai9_shopType').click(function(){
				toggelCheck('fucai9')
			})
			
			$('#fucai9_area_all').click(function(){
				fucai9_area.set(getFucai9AreaKeyArr());
				toggelCheck('fucai9')
			})
			
			$('#fucai9_area_reset').click(function(){
				fucai9_area.set();
				toggelCheck('fucai9')
			})
			
			$('#fucai9_shopType_all').click(function(){
				fucai9_shopType.set(getFucai9ShopTypeKeyArr());
				toggelCheck('fucai9')
			})
			
			$('#fucai9_shopType_reset').click(function(){
				fucai9_shopType.set();
				toggelCheck('fucai9')
			})
			
			$('#okBtn').click(function() {
				submitAction();
			})
			
			$('#cancelBtn').click(function() {
				filterLayer.close(closeIndex);
			})
		</script>

	<script type="text/javascript">
			layui.use('form', function () {
				var form = layui.form;
				form.on('checkbox(showType)', function(data){
					 if (data.elem.checked == true) {
						 toggelCheck(data.elem.value)
					 }
					 
				});  
			})
			
			function toggelCheck(type) {
				if (type == 'qudao') {
					 $("#qudaoCheck").prop("checked", true);
					 $("#yidongCheck").prop("checked", false);
					 $('#ticaiCheck').prop("checked", false);
					 $('#fucai8Check').prop("checked", false);
					 $('#fucai9Check').prop("checked", false);
					 
				} else if (type == 'yidong') {
					 $("#qudaoCheck").prop("checked", false);
					 $("#yidongCheck").prop("checked", true);
					 $('#ticaiCheck').prop("checked", false);
					 $('#fucai8Check').prop("checked", false);
					 $('#fucai9Check').prop("checked", false);
				 } else  if (type == 'ticai') {
					 $("#ticaiCheck").prop("checked", true);
					 $("#qudaoCheck").prop("checked", false);
					 $('#yidongCheck').prop("checked", false);
					 $('#fucai8Check').prop("checked", false);
					 $('#fucai9Check').prop("checked", false);
				 } else  if (type == 'fucai8') {
					 $("#fucai8Check").prop("checked", true);
					 $("#qudaoCheck").prop("checked", false);
					 $('#ticaiCheck').prop("checked", false);
					 $('#yidongCheck').prop("checked", false);
					 $('#fucai9Check').prop("checked", false);
				 } else  if (type == 'fucai9') {
					 $("#fucai9Check").prop("checked", true);
					 $("#qudaoCheck").prop("checked", false);
					 $('#ticaiCheck').prop("checked", false);
					 $('#fucai8Check').prop("checked", false);
					 $('#yidongCheck').prop("checked", false);
				 }
				 
				 resetCount();
				 
				 var form = layui.form;
				 form.render();
			}
			
			function submitAction() {
				console.log("--"+filterLayer.index)
				
				var arr = new Array();
	            $("input:checkbox[name='showType']:checked").each(function(i){
	                arr[i] = $(this).val();
	            });
	
				if (arr.length > 1) {
					showTips('由于数据量太大，请只选择一种数据类型')
					return;
				} else if (arr.length == 0) {
					showTips('请选择要展示的数据类型')
					return;
				}
				
				var showTypeStr = arr[0];
				
				if (showTypeStr === 'qudao') {
					if (qudao_type.values.length == 0) {
						showTips('请选择机器类型')
					} else {
						getQudaoInfo();
						filterLayer.close(closeIndex);
					}
				}
				
				if (showTypeStr === 'yidong') {
					if (yidong_type.values.length == 0) {
						showTips('请选择类型')
					} else if (yidong_area.values.length == 0) {
						showTips('请选择区域')
					} else {
						getYidongInfo();
						filterLayer.close(closeIndex);
					}
				}
				
				if (showTypeStr === 'ticai') {
					if (ticai_area.values.length == 0) {
						showTips('请选择区域')
					} else {
						getTicaiList();
						filterLayer.close(closeIndex);
					}
				}
				
				if (showTypeStr === 'fucai8') {
					if (fucai8_shopType.values.length == 0) {
						showTips('请选择店铺类型')
					} else if (fucai8_danji.values.length == 0) {
						showTips('请选择单双机')
					} else if (fucai8_wangdian.values.length == 0) {
						showTips('请选择渠道网点')
					} else {
						getFucai8List();
						filterLayer.close(closeIndex);
					}
				}
				
				if (showTypeStr === 'fucai9') {
					if (fucai9_area.values.length == 0) {
						showTips('请选择区域')
					} else if (fucai9_shopType.values.length == 0) {
						showTips('请选择网点类型')
					} else {
						getFucai9List();
						filterLayer.close(closeIndex);
					}
				}
				
			}
		</script>

	<script type="text/javascript">
		function refreshData() {
			qudao_type.set(getQudaoTypeKeyArr());
			toggelCheck('qudao')
			
			getQudaoInfo()
		}
	</script>
	
	<!-- 渠道 -->
	<script type="text/javascript">
	
		function getQudaoInfo() {
			showLoading();
			
			$.ajax({
				url : "getQudaoList",
				type : "POST",
				data : {
					typeArr : JSON.stringify(qudao_type.values)
				},
				error : function(xmlHttpRequest, error) {
					hideLoading();
				},
				success : function(resp) {
					console.log(JSON.stringify(resp));
					
					var data = resp['qudao'];
					
					markers = [];
					layer.clear();
					
					showTipWithCtrl('共检索到'+data.length+'条数据', "#filterImg");

					for (var i = 0; i < data.length; i++) {
						var item = data[i];
						
						if (item.sHOP_Position.length < 12) {
							continue;
						}
						
						var curData = {
							position: item.sHOP_Position,
							icon: getImgWithType('qudao')
						};

						var labelMarker = new AMap.LabelMarker(curData);

						labelMarker.content = '<div>名称：'+item.sHOP_Title+'</div><div>地址：'+item.sHOP_Address+'</div><div>类型：'+item.dDI_Type+'</div><div>销售额：'+item.sum_mony+'</div><div>排名：'+item.sum_order+'</div>';
						labelMarker.on('click', markerClick);
						labelMarker.emit('click', {
							target: labelMarker
						});

						markers.push(labelMarker);
					}

					layer.add(markers);
					
					hideLoading();
					
				}
			});
		}
	</script>

	<!-- 移动 -->
	<script type="text/javascript">
		function getYidongInfo() {
			showLoading();
			
			$.ajax({
				url : "getYidongList",
				type : "POST",
				data : {
					typeArr : JSON.stringify(yidong_type.values),
					areaArr : JSON.stringify(yidong_area.values)
				},
				error : function(xmlHttpRequest, error) {
					console.log("----------------");
					hideLoading();
				},
				success : function(resp) {
					console.log(JSON.stringify(resp));
					
					var data = resp['yidong'];
					
					markers = [];
					layer.clear();
					
					showTipWithCtrl('共检索到'+data.length+'条数据', "#filterImg");

					for (var i = 0; i < data.length; i++) {
						var item = data[i];
						
						if (item.geo.length < 12) {
							continue;
						}
						
						var curData = {
							position: item.geo,
							icon: getImgWithType('yidong')
						};

						var labelMarker = new AMap.LabelMarker(curData);

						labelMarker.content = '<div>简称：'+item.alias+'</div><div>类型：'+item.type+'</div><div>地址：'+item.address+'</div>';
						labelMarker.on('click', markerClick);
						labelMarker.emit('click', {
							target: labelMarker
						});

						markers.push(labelMarker);
					}

					layer.add(markers);
					
					hideLoading();
				}
			});
		}
	</script>

	<!-- 体彩-->
	<script type="text/javascript">
		function getTicaiList() {
			showLoading();
			
			$.ajax({
				url : "getTicaiList",
				type : "POST",
				data : {
					areaArr : JSON.stringify(ticai_area.values)
				},
				error : function(xmlHttpRequest, error) {
					console.log("----------------");
					hideLoading();
				},
				success : function(resp) {
					console.log(JSON.stringify(resp));
					
					var data = resp['ticai'];
					
					markers = [];
					layer.clear();
					
					showTipWithCtrl('共检索到'+data.length+'条数据', "#filterImg");

					for (var i = 0; i < data.length; i++) {
						var item = data[i];
						
						if (item.geo.length < 12) {
							continue;
						}
						
						var curData = {
							position: item.geo,
							icon: getImgWithType('ticai'),
							text:showTip(item.shopNo)
						};

						var labelMarker = new AMap.LabelMarker(curData);

						labelMarker.content = '<div>编号：'+item.shopNo+'</div><div>区域：'+item.area+'</div><div>地址：'+item.address+'</div>';
						labelMarker.on('click', markerClick);
						labelMarker.emit('click', {
							target: labelMarker
						});

						markers.push(labelMarker);
					}

					layer.add(markers);
					
					hideLoading();
				}
			});
		}
	</script>

	<!-- 福彩8 -->
	<script type="text/javascript">
		function getFucai8List() {
			showLoading();
			
			$.ajax({
				url : "getFucai8List",
				type : "POST",
				data : {
					typeArr: JSON.stringify(fucai8_shopType.values),
					danjiArr: JSON.stringify(fucai8_danji.values),
					wangdianArr: JSON.stringify(fucai8_wangdian.values)
				},
				error : function(xmlHttpRequest, error) {
					console.log("----------------");
					hideLoading();
				},
				success : function(resp) {
					console.log(JSON.stringify(resp));
					
					var data = resp['fucai8'];
					
					markers = [];
					layer.clear();
					
					showTipWithCtrl('共检索到'+data.length+'条数据', "#filterImg");

					for (var i = 0; i < data.length; i++) {
						var item = data[i];
						
						if (item.geo.length < 12) {
							continue;
						}
						
						var curData = {
							position: item.geo,
							icon: getImgWithType('fucai8'),
							text:showTip(item.shopName)
						};

						var labelMarker = new AMap.LabelMarker(curData);

						labelMarker.content = '<div>名称：'+item.shopName+'</div><div>网点类型：'+item.shopType+'</div><div>地址：'+item.address+'</div>';
						labelMarker.on('click', markerClick);
						labelMarker.emit('click', {
							target: labelMarker
						});

						markers.push(labelMarker);
					}

					layer.add(markers);
					
					hideLoading();
					
				}
			});
		}
	</script>

	<!-- 福彩9 -->
	<script type="text/javascript">
		function getFucai9List() {
			showLoading();
			
			$.ajax({
				url : "getFucai9List",
				type : "POST",
				data : {
					wangdianArr : JSON.stringify(fucai9_shopType.values),
					areaArr : JSON.stringify(fucai9_area.values)
				},
				error : function(xmlHttpRequest, error) {
					console.log("----------------");
					hideLoading();
				},
				success : function(resp) {
					console.log(JSON.stringify(resp));
					
					var data = resp['fucai9'];
					
					markers = [];
					layer.clear();
					
					showTipWithCtrl('共检索到'+data.length+'条数据', "#filterImg");

					for (var i = 0; i < data.length; i++) {
						var item = data[i];
						
						if (item.geo.length < 12) {
							continue;
						}
						
						var curData = {
							position: item.geo,
							icon: getImgWithType('fucai9'),
							text:showTip(item.shopName)
						};

						var labelMarker = new AMap.LabelMarker(curData);

						labelMarker.content = '<div>名称：'+item.shopName+'</div><div>网点类型：'+item.shopType+'</div><div>地址：'+item.address+'</div>';
						labelMarker.on('click', markerClick);
						labelMarker.emit('click', {
							target: labelMarker
						});

						markers.push(labelMarker);
					}

					layer.add(markers);
					
					hideLoading();
					
				}
			});
		}
	</script>


</body>
</html>
